<section class="report-shell">
  <header class="report-header no-print">
    <div>
      <p class="report-kicker">Performance Report</p>
      <h1 class="report-heading">Your goals and progress summary</h1>
      <p class="report-subtext">Share your progress with a public link or save it as a PDF.</p>
    </div>
    <div class="report-actions no-print">
      <button
        type="button"
        class="report-button report-button-outline"
        (click)="downloadPdf()"
      >
        Download PDF
      </button>
      <button
        type="button"
        class="report-button report-button-primary"
        (click)="toggleShare()"
        [disabled]="shareLoading()"
      >
        {{ shareEnabled() ? 'Disable sharing' : 'Enable sharing' }}
      </button>
    </div>
  </header>

  <div class="report-share-card no-print">
    <div>
      <p class="report-share-label">Shareable link</p>
      <p class="report-share-value">
        @if (shareEnabled()) {
          {{ shareLink() }}
        } @else {
          Sharing is disabled. Toggle sharing to generate a link.
        }
      </p>
    </div>
    <button
      type="button"
      class="report-button report-button-outline"
      [disabled]="!shareEnabled()"
      (click)="copyShareLink()"
    >
      {{ linkCopied() ? 'Copied!' : 'Copy link' }}
    </button>
  </div>

  @if (loading()) {
    <div class="report-loading">Loading report...</div>
  } @else if (report()) {
    <app-report-view [report]="report()!"></app-report-view>
  } @else {
    <div class="report-loading">No report data available yet.</div>
  }
</section>
